Ключевое слово `friend` позволяет функции или другому классу получить доступ к закрытым (`private`) и защищенным (`protected`) членам класса.

Это исключение из правил инкапсуляции: вы явно указываете, кому доверяете просмотр своих скрытых данных.

1. **Дружба не взаимна:** Если класс А — друг класса Б, это не значит, что Б автоматически друг класса А.
2. **Дружба не наследуется:** Друг вашего родителя — не обязательно ваш друг.
3. **Дружба не транзитивна:** Друг вашего друга — не ваш друг.


**Дружественная функция**
Обычно используется для перегрузки операторов (например, `<<` для вывода в консоль) или когда функции нужно работать с приватными данными двух разных классов.

```cpp
#include <iostream>

class Box {
private:
    double width;

public:
    Box(double w) : width(w) {}

    // Объявляем дружественную функцию
    friend void printWidth(Box b);
};

// Реализация функции (она не является членом класса!)
void printWidth(Box b) {
    // У нее есть доступ к private полю width
    std::cout << "Ширина коробки: " << b.width << std::endl;
}

int main() {
    Box box(10.5);
    printWidth(box); // Выведет 10.5
    return 0;
}
```

**Дружественный класс**
Используется, когда один класс тесно связан с другим (например, класс-итератор должен иметь доступ к данным контейнера).

```cpp
#include <iostream>

class ClassA {
private:
    int secretCode = 42;

    // Объявляем ClassB другом
    friend class ClassB;
};

class ClassB {
public:
    void revealSecret(ClassA& a) {
        // Доступ разрешен, так как ClassB — друг ClassA
        std::cout << "Секретный код: " << a.secretCode << std::endl;
    }
};

int main() {
    ClassA objA;
    ClassB objB;
    objB.revealSecret(objA);
    return 0;
}
```

Когда использовать?
- **Перегрузка операторов:** Самый частый случай (особенно для `operator<<` и `operator>>`).
- **Оптимизация:** Когда вызов публичных методов-геттеров слишком накладен или неудобен.
- **Тесная связь:** Когда два класса спроектированы работать только вместе.

**Важно:** Не злоупотребляйте `friend`, так как это нарушает инкапсуляцию и делает код более запутанным. Если друзей становится слишком много, возможно, стоит пересмотреть архитектуру классов.